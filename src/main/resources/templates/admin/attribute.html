
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link type="text/css" rel="stylesheet"  th:href="@{/css/admin.css}"/>
<title>Document</title>
</head>
<body>
	<!-- navbar -->  
	<!-- <div th:insert="/admin/navbar::navbar"></div> -->  

 	<!-- navbar -->  

	<div class="container-fluid">
		<div class="row flex-nowrap">

			<!-- <div th:insert="/admin/slidebar::slidebar"></div>-->  

			<div class="col py-3">
				<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
					<li class="nav-item" role="presentation">
						<button class="nav-link active" id="pills-home-tab"
							data-bs-toggle="pill" data-bs-target="#pills-home" type="button"
							role="tab" aria-controls="pills-home" aria-selected="true">Add
							Size</button>
					</li>
					<li class="nav-item" role="presentation">
						<button class="nav-link" id="pills-profile-tab"
							data-bs-toggle="pill" data-bs-target="#pills-profile"
							type="button" role="tab" aria-controls="pills-profile"
							aria-selected="false">Add Color</button>
					</li>
				</ul>
				<div class="tab-content" id="pills-tabContent">
					<div class="tab-pane fade show active" id="pills-home"
						role="tabpanel" aria-labelledby="pills-home-tab">
						<form action="">
							<div class="row pt-5">
								<hr>
								<h3>Product Size</h3>
								<br> <br>
								<div class="col-6">
									<p>Attribiute terms can be assigned to products and
										variations.</p>
									<p>
										<b>Note:</b> Deleting a term will remove it form all products
										and variation to which it has been assigned. Recreating a term
										will not automatically assign it back to products.
									</p>
									<h5>Add new Size</h5>
									<div class="form-group">
										<b for="name">Name</b> <input id="name" class="form-control"
											type="text" name=""> <small
											class="form-text text-muted">The name it how it
											appears on your site.</small>
									</div>
									<br>
									<button class="btn btn-primary" type="button">Add new
										Size</button>
								</div>
								<div class="col-6">
									<table class="table">
										<thead>
											<tr>
												<th scope="col">Name</th>
												<th scope="col">Edit</th>
												<th scope="col">Delete</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>S</td>
												<td><a href="" class="text-decoration-none"><i
														class="bi bi-pencil-square"></i>Edit</a></td>
												<td><a href="" class="text-decoration-none text-danger"><i
														class="bi bi-trash"></i>Delete</a></td>
											</tr>
											<tr>
												<td>M</td>
												<td><a href="" class="text-decoration-none"><i
														class="bi bi-pencil-square"></i>Edit</a></td>
												<td><a href="" class="text-decoration-none text-danger"><i
														class="bi bi-trash"></i>Delete</a></td>
											</tr>
											<tr>
												<td>L</td>
												<td><a href="" class="text-decoration-none"><i
														class="bi bi-pencil-square"></i>Edit</a></td>
												<td><a href="" class="text-decoration-none text-danger"><i
														class="bi bi-trash"></i>Delete</a></td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</form>

					</div>
					<div class="tab-pane fade" id="pills-profile" role="tabpanel"
						aria-labelledby="pills-profile-tab">
						
							<div class="row pt-5">
								<hr>
								<h3>Product Colour</h3>
								<br> <br>
								<div class="col-6">
									<p>Attribiute terms can be assigned to products and
										variations.</p>
									<p>
										<b>Note:</b> Deleting a term will remove it form all products
										and variation to which it has been assigned. Recreating a term
										will not automatically assign it back to products.
									</p>
									<h5>Add new colour</h5>
									<form action="">
										<div class="form-group">
											<b for="name">Name</b> 
										
											<input id="name" class="form-control"
												type="text" name="" th:object="${attributeValue}"> <small
												class="form-text text-muted">The name it how it
												appears on your site.</small>
										</div>
										<br>
										<button class="btn btn-primary" type="button">Add new
											Color</button>
									</form>
								</div>
								<div class="col-6">
									<table id="color-table" class="table">
										<thead>
											<tr>
												<th scope="col">Number</th>
												<th scope="col">Name</th>
												<th scope="col">Edit</th>
												<th scope="col">Delete</th>
											</tr>
										</thead>
										<tbody>
									
										<tr th:id="color" th:each="attributeValue ,row : ${attributeValueResponseDto}">
											<td th:id="number" th:text="${(page.number) * page.size + row.count}"></td>
											<td th:id="name" th:text="${attributeValue.name}"></td>
											<td><a href="" class="text-decoration-none"><i
															class="bi bi-pencil-square"></i>Edit</a></td>
											<td><a href="" class="text-decoration-none text-danger"><i
															class="bi bi-trash"></i>Delete</a></td>
										</tr>
										
											
										</tbody>
									</table>
									<nav th:id="paging">
								        <ul class="pagination">
								            <li th:class="${page.number > 0} ? '' : 'page-item disabled'" >
								                <a class="page-link"  th:onclick="'loadData(' + ${page.number - 1} + ')'"  aria-label="Previous">
								                    <span aria-hidden="true">&laquo;</span>
								                 
								                </a>
								            </li>
								            <li th:each="i : ${#numbers.sequence(page.number > 2 ? page.number - 2 : 0, page.number + 2 < page.totalPages - 1 ? page.number + 2 : page.totalPages - 1)}" class="page-item" th:classappend="${i == page.number} ? 'active'">
								                <a class="page-link"  th:onclick="'loadData(' + ${i} + ')'" th:text="${i + 1}"></a>
								            </li>
								            <li th:if="${page.totalPages > 5 && page.number < page.totalPages - 3}" class="page-item disabled"><a class="page-link" href="#">...</a></li>
								            <li th:if="${page.totalPages > 1 && page.totalPages - 1 != page.number && page.totalPages - 2 != page.number && page.number < page.totalPages - 3}" class="page-item">
								                <a class="page-link"  th:onclick="'loadData(' + ${page.totalPages - 1} + ')'" th:text="${page.totalPages}"></a>
								            </li>
								            <li th:class="${page.number < page.totalPages - 1} ? '' : 'page-item disabled'">
								                <a class="page-link"  th:onclick="'loadData(' + ${page.number + 1} + ')'" aria-label="Next">
								                    <span aria-hidden="true">&raquo;</span>
								                    
								                </a>
								            </li>
								        </ul>
								    </nav>
								</div>
							</div>
						
					</div>
				</div>
			</div>
		</div>
	</div>

	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
		integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
		integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
		crossorigin="anonymous"></script>
		
<script>
var pagination ;
var currentPage;
var totalPages;
function loadData(page) {
    $.ajax({
      url: '/attributeValue/listPaging',
      type: 'GET',
      dataType: 'json',
      data: {page : page},
      success: function(data) {
        // Xóa tất cả các dòng cũ
        $('#color-table tbody').empty();

        // Thêm các dòng mới
        $.each(data.attributeValueResponseDto, function(index, task) {
        	var row = $('<tr>');
            row.append($('<td>').text(data.currentPage * data.size + index+1));
            row.append($('<td>').text(task.name));
            row.append($('<td>').html('<a href="#" class="text-decoration-none"><i class="bi bi-pencil-square"></i>Edit</a>'));
            row.append($('<td>').html('<a href="#" class="text-decoration-none text-danger"><i class="bi bi-trash"></i>Delete</a>'));
            $('#color-table tbody').append(row);
        });
         pagination = '';
         currentPage = data.currentPage;
         totalPages = data.totalPages;
        // Tạo lại các nút trang
        createPagination("#paging",pagination,currentPage,totalPages );
         

      },
      error: function(){}})}
      
      
      //function to create pagination after call ajax
      function createPagination(navId,pagination,currentPage,totalPages ){
    	  $(navId).empty();
          
          pagination += '<ul class="pagination">';
          pagination += '<li ' + (currentPage > 0 ? '' : 'class="page-item disabled"') + '><a class="page-link" onclick="' + (currentPage > 0 ? 'loadData(' + (currentPage - 1) + ')' : 'return false;') + '" aria-label="Previous"><span aria-hidden="true">&laquo;</span><span class="sr-only"></span></a></li>';

         
              var startPage = currentPage > 2 ? currentPage - 2 : 0;
              var endPage = currentPage + 2 < totalPages - 1 ? currentPage + 2 : totalPages - 1;

              for (var i = startPage; i <= endPage; i++) {
                  pagination += '<li ' + (currentPage === i ? 'class="page-item active"' : '') + '><a class="page-link" onclick="loadData(' + i + ')" href="#">' + (i + 1) + '</a></li>';
              }
             //${page.totalPages > 5 && page.number < page.totalPages - 3}
              if ((totalPages > 5) &&  (currentPage < totalPages-3)) {
                  pagination += '<li class="page-item disabled"><a class="page-link" href="#">...</a></li>';
              }
             
              if ((totalPages > 1) && (totalPages-1 != currentPage) && (totalPages-2 != currentPage) && (currentPage<totalPages-3)) {
                  pagination += '<li><a class="page-link" onclick="loadData(' + (totalPages - 1) + ')" href="#">' + totalPages + '</a></li>';
              }

          pagination += '<li ' + (currentPage < totalPages - 1 ? '' : 'class="page-item disabled"') + '><a class="page-link" onclick="' + (currentPage < totalPages - 1 ? 'loadData(' + (currentPage + 1) + ')' : 'return false;') + '" aria-label="Next"><span aria-hidden="true">&raquo;</span><span class="sr-only"></span></a></li>';
          pagination += '</ul>';
           // Thay thế nút trang cũ bằng nút trang mới
           $(navId).append(pagination);
      }
	

</script>
</body>
</html>